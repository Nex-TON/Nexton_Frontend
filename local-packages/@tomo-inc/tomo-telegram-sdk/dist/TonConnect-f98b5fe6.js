"use strict";require("zustand");var e=require("./EthereumProvider-225fd49a.js");require("axios"),require("zustand/middleware"),require("tonweb"),require("viem"),require("@ton/core");var n,t=require("react"),r=(n=t)&&"object"==typeof n&&"default"in n?n.default:n;require("qs"),require("uuid"),require("eventemitter3"),require("buffer"),require("@tonconnect/ui");var o=require("./index-121ce3a9.js");exports.default=function(n){var c=n.updateTonConnect,u=function(n){var r,c=n||{},u=c.connectSuccess,a=c.setProviders,s=c.setConnectResult,i=o.useTonConnectUI()[0],f=o.useTonConnectModal().open,d=e.useProxyLocalStorage(),l=function(){var n=e._asyncToGenerator(e._regeneratorRuntime().mark((function n(t){return e._regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t&&t.tonProof&&i.setConnectRequestParameters({state:"ready",value:{tonProof:t.tonProof}}),f(),e.abrupt("return","connect");case 3:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),p=d.get("connect_type");t.useEffect((function(){"TON"!==p||i.connected||v()}),[i.connected,p]);var v=function(){var n=e._asyncToGenerator(e._regeneratorRuntime().mark((function n(){return e._regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a((function(n){return e._extends({},n,{tomo_ton:null})})),d.set("accounts",e._extends({},d.get("accounts")||{},{ton:void 0})),window.tomo_ton=null,d.set("connect_type","");case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return t.useEffect((function(){var n,t;if(i.connected&&null!=(n=i.account)&&n.address){u&&u();var r=i.account;d.set("accounts",e._extends({},d.get("accounts")||{},{ton:r})),d.set("connect_type","TON"),Object.defineProperty(i,"getBalance",{value:(t=e._asyncToGenerator(e._regeneratorRuntime().mark((function n(){return e._regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.getTonBalance({tonAddress:r.address}));case 1:case"end":return n.stop()}}),n)}))),function(){return t.apply(this,arguments)}),writable:!0,enumerable:!0,configurable:!1}),window.tomo_ton=i,a&&a((function(n){return e._extends({},n||{},{tomo_ton:i})}))}}),[i.connected,null==(r=i.account)?void 0:r.address]),t.useEffect((function(){var e=i.onStatusChange((function(e){var n;null!=e&&null!=(n=e.connectItems)&&n.tonProof&&"proof"in e.connectItems.tonProof&&s({result:{tonProof:e.connectItems.tonProof}})}));return function(){e()}}),[i]),{connect:l,disconnect:v,connected:(null==i?void 0:i.connected)||!1}}({connectSuccess:n.closeModal,setProviders:n.setProviders,setConnectResult:n.setConnectResult}),a=u.connect,s=u.connected;return t.useEffect((function(){c({connect:a,connected:s})}),[a,s]),t.useEffect((function(){a()}),[]),r.createElement(r.Fragment,null)};
//# sourceMappingURL=TonConnect-f98b5fe6.js.map
